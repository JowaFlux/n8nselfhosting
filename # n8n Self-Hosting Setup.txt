# n8n Self-Hosting Setup

Dieses Repository enthÃ¤lt eine vollstÃ¤ndige n8n-Selbst-Hosting-LÃ¶sung mit Docker Compose, die fÃ¼r schnelle Bereitstellung und einfache Wartung optimiert ist.

## ğŸš€ One-Click-Deployment

### Ãœber GitHub (Codespaces)

1. **Repository forken oder klonen:**
   ```bash
   git clone https://github.com/your-username/n8n-docker-setup.git
   cd n8n-docker-setup
   ```

2. **GitHub Codespaces starten:**
   - Klicke auf "Code" â†’ "Codespaces" â†’ "Create codespace on main"
   - Warte auf die Initialisierung der Entwicklungsumgebung

3. **n8n sofort starten:**
   ```bash
   docker-compose up -d
   ```

4. **Zugriff auf n8n:**
   - Ã–ffne Port 5678 in Codespaces
   - Standard-Login: `admin` / `changeme123!`

### Lokales Docker-Deployment

1. **Voraussetzungen:**
   - Docker und Docker Compose installiert
   - Mindestens 512MB freier RAM
   - Port 5678 verfÃ¼gbar

2. **Installation:**
   ```bash
   # Repository klonen
   git clone https://github.com/your-username/n8n-docker-setup.git
   cd n8n-docker-setup
   
   # Umgebungsvariablen anpassen (optional)
   cp .env.example .env
   nano .env
   
   # n8n starten
   docker-compose up -d
   ```

3. **Zugriff:**
   - Browser: `http://localhost:5678`
   - Standard-Login: `admin` / `changeme123!`

## âš™ï¸ Konfiguration

### Umgebungsvariablen

Wichtige Einstellungen in der `docker-compose.yml`:

```yaml
environment:
  - N8N_BASIC_AUTH_USER=admin          # Benutzername Ã¤ndern
  - N8N_BASIC_AUTH_PASSWORD=changeme123!  # Passwort Ã¤ndern!
  - N8N_HOST=localhost                 # Domain fÃ¼r Produktion
  - WEBHOOK_URL=http://localhost:5678/ # Webhook-URL anpassen
  - GENERIC_TIMEZONE=Europe/Berlin     # Zeitzone anpassen
```

### Produktions-Setup

FÃ¼r Produktionsumgebungen:

1. **Sicherheit:**
   - Starkes Passwort setzen
   - HTTPS konfigurieren (Reverse Proxy)
   - Firewall-Regeln einrichten

2. **Domain-Konfiguration:**
   ```yaml
   - N8N_HOST=your-domain.com
   - N8N_PROTOCOL=https
   - WEBHOOK_URL=https://your-domain.com/
   ```

3. **Reverse Proxy (Nginx/Traefik):**
   - SSL-Zertifikat konfigurieren
   - Port 5678 nur intern erreichbar machen

## ğŸ”„ Automatisierung & Updates

### Update-Sync-Shell-Task

Beispiel-Script fÃ¼r automatische Updates (`update-n8n.sh`):

```bash
#!/bin/bash

# n8n Update Script
# Verwendung: ./update-n8n.sh oder als Cronjob

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

echo "[$(date)] Starte n8n Update-Prozess..."

# Backup der aktuellen Daten
echo "[$(date)] Erstelle Backup..."
cp -r n8n_data n8n_data_backup_$(date +%Y%m%d_%H%M%S)

# Container stoppen
echo "[$(date)] Stoppe n8n Container..."
docker-compose down

# Neue Images laden
echo "[$(date)] Lade neue Docker Images..."
docker-compose pull

# AufrÃ¤umen alter Images
echo "[$(date)] Entferne alte Images..."
docker image prune -f

# Container neu starten
echo "[$(date)] Starte n8n neu..."
docker-compose up -d

# GesundheitsprÃ¼fung
echo "[$(date)] Warte auf n8n Startup..."
sleep 30

if curl -f http://localhost:5678/healthz > /dev/null 2>&1; then
    echo "[$(date)] âœ… n8n Update erfolgreich!"
    # Alte Backups nach 7 Tagen lÃ¶schen
    find . -name "n8n_data_backup_*" -type d -mtime +7 -exec rm -rf {} +
else
    echo "[$(date)] âŒ n8n Update fehlgeschlagen! Stelle Backup wieder her..."
    docker-compose down
    rm -rf n8n_data
    mv n8n_data_backup_$(date +%Y%m%d_%H%M%S) n8n_data
    docker-compose up -d
fi

echo "[$(date)] Update-Prozess abgeschlossen."
```

### Cronjob-Einrichtung

```bash
# Script ausfÃ¼hrbar machen
chmod +x update-n8n.sh

# Cronjob hinzufÃ¼gen (jeden Sonntag um 3:00 Uhr)
crontab -e

# Folgende Zeile hinzufÃ¼gen:
0 3 * * 0 /path/to/your/n8n-docker-setup/update-n8n.sh >> /var/log/n8n-update.log 2>&1
```

### Monitoring Script

Ãœberwachungs-Script (`monitor-n8n.sh`):

```bash
#!/bin/bash

# n8n Health Check
if ! curl -f http://localhost:5678/healthz > /dev/null 2>&1; then
    echo "[$(date)] âŒ n8n ist nicht erreichbar! Starte neu..."
    cd /path/to/your/n8n-docker-setup
    docker-compose restart
    
    # Optional: Benachrichtigung senden
    # curl -X POST -H 'Content-type: application/json' \
    #   --data '{"text":"n8n Server wurde neu gestartet!"}' \
    #   YOUR_SLACK_WEBHOOK_URL
else
    echo "[$(date)] âœ… n8n lÃ¤uft normal"
fi
```

## ğŸ“ Projektstruktur

```
n8n-docker-setup/
â”œâ”€â”€ docker-compose.yml    # Haupt-Konfiguration
â”œâ”€â”€ README.md            # Diese Anleitung
â”œâ”€â”€ .gitignore          # Git-AusschlÃ¼sse
â”œâ”€â”€ .env.example        # Umgebungsvariablen-Vorlage
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ update-n8n.sh   # Update-Automatisierung
â”‚   â””â”€â”€ monitor-n8n.sh  # Monitoring
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ production.md   # Produktions-Setup
â”‚   â””â”€â”€ troubleshooting.md # Fehlerbehebung
â””â”€â”€ n8n_data/           # Persistente Daten (nicht in Git)
    â”œâ”€â”€ workflows/
    â”œâ”€â”€ credentials/
    â””â”€â”€ database.sqlite
```

## ğŸ› ï¸ Wartung

### Wichtige Befehle

```bash
# Status prÃ¼fen
docker-compose ps

# Logs anzeigen
docker-compose logs -f n8n

# Container neu starten
docker-compose restart

# VollstÃ¤ndiger Neustart
docker-compose down && docker-compose up -d

# Backup erstellen
tar -czf n8n-backup-$(date +%Y%m%d).tar.gz n8n_data/

# Update durchfÃ¼hren
docker-compose pull && docker-compose up -d
```

### Fehlerbehebung

**Problem: n8n startet nicht**
```bash
# Logs prÃ¼fen
docker-compose logs n8n

# Berechtigungen prÃ¼fen
sudo chown -R 1000:1000 n8n_data/
```

**Problem: Webhooks funktionieren nicht**
- `WEBHOOK_URL` in docker-compose.yml prÃ¼fen
- Firewall-Einstellungen Ã¼berprÃ¼fen
- Port-Weiterleitung konfigurieren

## ğŸ”’ Sicherheit

- **Passwort Ã¤ndern:** Standard-Zugangsdaten sofort Ã¤ndern
- **HTTPS verwenden:** FÃ¼r Produktionsumgebungen zwingend
- **Firewall:** Nur notwendige Ports Ã¶ffnen
- **Updates:** RegelmÃ¤ÃŸige Updates durchfÃ¼hren
- **Backups:** Automatische Datensicherung einrichten

## ğŸ“š ZusÃ¤tzliche Ressourcen

- [n8n Dokumentation](https://docs.n8n.io/)
- [Docker Compose Referenz](https://docs.docker.com/compose/)
- [n8n Community](https://community.n8n.io/)
- [GitHub Issues](https://github.com/n8n-io/n8n/issues)

## ğŸ“„ Lizenz

Dieses Setup basiert auf n8n und steht unter der [Fair-use license](https://github.com/n8n-io/n8n/blob/master/LICENSE.md).

---

**Hinweis:** Vergiss nicht, die Standard-Zugangsdaten zu Ã¤ndern und fÃ¼r Produktionsumgebungen entsprechende SicherheitsmaÃŸnahmen zu implementieren!